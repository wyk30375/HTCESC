# 客户展示页面 - 车辆详情功能说明

## 🎯 功能概述

在客户展示页面（公共首页），点击任意在售车辆卡片，即可弹出详情对话框，展示该车辆的完整信息。

---

## 📱 使用方法

### 1. 访问公共展示页面
- 访问地址：`/` 或 `/public`
- 无需登录即可访问

### 2. 浏览在售车辆
- 页面展示所有激活车行的在售车辆
- 支持按车行筛选
- 支持搜索（品牌、型号、车牌号）

### 3. 查看车辆详情
**方法**：点击任意车辆卡片

**效果**：弹出详情对话框，展示完整车辆信息

---

## 📋 详情对话框内容

### 1. 车辆照片（如有）
- 网格布局展示所有车辆照片
- 支持鼠标悬停放大效果
- 响应式布局：
  - 移动端：2列
  - 桌面端：3列

### 2. 基本信息
| 字段 | 说明 |
|------|------|
| 品牌型号 | 车辆品牌和型号 |
| 车辆类型 | 轿车/SUV/MPV等 |
| 年份 | 出厂年份 |
| 里程数 | 行驶里程 |
| 过户次数 | 过户次数 |
| 车牌号 | 车辆牌照号码 |

### 3. 技术参数（如有填写）
| 字段 | 说明 |
|------|------|
| 排量 | 发动机排量（升） |
| 变速箱 | 变速箱类型 |
| 驱动方式 | 前驱/后驱/四驱 |
| 燃料类型 | 汽油/柴油/电动等 |
| 排放标准 | 国三/国四/国五/国六 |
| 座位数 | 座位数量 |

### 4. 外观信息（如有填写）
| 字段 | 说明 |
|------|------|
| 车身颜色 | 外观颜色 |
| 内饰颜色 | 内饰颜色 |

### 5. 车辆状态
- **车况标记**：
  - ✅ 车况正常（绿色标签）
  - ⚠️ 事故车（红色标签）
  - ⚠️ 泡水车（红色标签）
  - ⚠️ 火烧车（红色标签）
- **车况描述**：详细的车况说明文字

### 6. 证件信息（如有填写）
| 字段 | 说明 |
|------|------|
| 保险到期日 | 保险到期日期 |
| 年检到期日 | 年检到期日期 |

### 7. 价格信息
| 字段 | 说明 |
|------|------|
| 新车指导价 | 新车购置价（如有） |
| 售价 | 当前售价（大号显示） |

### 8. 车行信息
| 字段 | 说明 |
|------|------|
| 车行名称 | 所属车行 |
| 联系人 | 联系人姓名 |
| 联系电话 | 联系电话 |
| 地址 | 车行地址 |

### 9. 操作按钮
- **关闭**：关闭详情对话框
- **联系车行**：显示车行联系方式（Toast提示）

---

## 🎨 界面设计

### 对话框样式
- **尺寸**：最大宽度 4xl（1024px）
- **高度**：最大高度 90vh，超出自动滚动
- **布局**：响应式网格布局
- **间距**：各部分之间使用分隔线和间距

### 信息分组
每个信息组包含：
1. **标题**：蓝色加粗标题（text-primary）
2. **内容**：网格布局展示字段
3. **间距**：组与组之间有明显间隔

### 字段显示
- **标签**：灰色小字（text-muted-foreground）
- **内容**：黑色中等字体（font-medium）
- **价格**：大号蓝色加粗（text-primary）

### 响应式布局
- **移动端**：2列网格
- **桌面端**：3列网格
- **车行信息**：移动端1列，桌面端2列

---

## 💡 交互说明

### 点击车辆卡片
- **触发**：点击车辆卡片任意位置
- **效果**：打开详情对话框
- **动画**：平滑淡入效果

### 点击联系方式按钮
- **触发**：点击卡片上的"联系方式"按钮
- **效果**：显示Toast提示，不打开详情对话框
- **实现**：使用 `e.stopPropagation()` 阻止事件冒泡

### 关闭详情对话框
- **方法1**：点击"关闭"按钮
- **方法2**：点击对话框外部区域
- **方法3**：按 ESC 键

### 联系车行
- **触发**：点击详情对话框底部的"联系车行"按钮
- **效果**：显示车行联系方式（Toast提示，持续5秒）
- **内容**：车行名称、联系电话、联系人

---

## 🔍 字段显示规则

### 必显字段
以下字段始终显示：
- 品牌型号
- 年份
- 里程数
- 过户次数
- 车牌号
- 售价
- 车辆状态
- 车行信息

### 可选字段
以下字段仅在有数据时显示：
- 车辆类型
- 技术参数（排量、变速箱、驱动、燃料、排放、座位数）
- 外观信息（车身颜色、内饰颜色）
- 车况描述
- 证件信息（保险到期、年检到期）
- 新车指导价

### 条件显示
- **技术参数组**：至少有一个技术参数字段有值时显示
- **外观信息组**：至少有一个外观字段有值时显示
- **证件信息组**：至少有一个证件字段有值时显示

---

## 📊 数据映射

### 枚举类型转换
系统自动将数据库枚举值转换为中文显示：

**车辆类型**：
- sedan → 轿车
- suv → SUV
- mpv → MPV
- coupe → 跑车
- hatchback → 两厢车
- pickup → 皮卡
- van → 面包车
- sports → 运动型

**变速箱类型**：
- manual → 手动
- automatic → 自动
- cvt → CVT无级变速
- dct → 双离合
- amt → AMT机械自动

**驱动方式**：
- fwd → 前驱
- rwd → 后驱
- awd → 全时四驱
- 4wd → 分时四驱

**燃料类型**：
- gasoline → 汽油
- diesel → 柴油
- electric → 纯电动
- hybrid → 混合动力
- phev → 插电混动

**排放标准**：
- national_3 → 国三
- national_4 → 国四
- national_5 → 国五
- national_6a → 国六A
- national_6b → 国六B

### 数字格式化
- **里程数**：自动添加千分位分隔符（如 50,000）
- **价格**：添加 ¥ 符号和千分位分隔符（如 ¥150,000）
- **排量**：添加 L 单位（如 2.0L）
- **座位数**：添加"座"单位（如 5座）
- **过户次数**：添加"次"单位（如 1次）

---

## 🎯 使用场景

### 场景1：客户浏览车辆
1. 客户访问公共展示页面
2. 浏览在售车辆卡片
3. 点击感兴趣的车辆
4. 查看详细信息
5. 点击"联系车行"获取联系方式

### 场景2：车行分享车辆
1. 车行员工访问公共展示页面
2. 找到自己车行的车辆
3. 点击查看详情
4. 截图或分享链接给客户
5. 客户查看详细信息后联系车行

### 场景3：多车行对比
1. 客户在公共展示页面浏览
2. 点击不同车行的同类车辆
3. 对比价格、配置、车况
4. 选择合适的车辆
5. 联系对应车行

---

## 📱 移动端优化

### 响应式布局
- **照片网格**：移动端2列，桌面端3列
- **信息网格**：移动端2列，桌面端3列
- **车行信息**：移动端1列，桌面端2列

### 触摸优化
- **卡片点击**：增大点击区域
- **按钮尺寸**：适合手指点击
- **滚动流畅**：对话框内容支持平滑滚动

### 字体大小
- **标题**：2xl（24px）
- **价格**：2xl（24px）
- **字段标签**：xs（12px）
- **字段内容**：base（16px）

---

## 🔧 技术实现

### 状态管理
```typescript
const [vehicleDetailOpen, setVehicleDetailOpen] = useState(false);
const [selectedVehicle, setSelectedVehicle] = useState<Vehicle | null>(null);
```

### 点击事件
```typescript
// 卡片点击
onClick={() => {
  setSelectedVehicle(vehicle);
  setVehicleDetailOpen(true);
}}

// 联系方式按钮点击（阻止冒泡）
onClick={(e) => {
  e.stopPropagation();
  // 显示联系方式
}}
```

### 条件渲染
```typescript
// 仅在有数据时显示
{selectedVehicle.displacement && (
  <div>排量: {selectedVehicle.displacement}L</div>
)}

// 组级别条件渲染
{(selectedVehicle.displacement || selectedVehicle.transmission_type) && (
  <div className="space-y-3">
    <h3>技术参数</h3>
    {/* 字段内容 */}
  </div>
)}
```

---

## ✅ 功能特点

### 1. 完整信息展示
- 展示车辆的所有详细信息
- 包含照片、参数、状态、价格等
- 信息分组清晰，易于阅读

### 2. 智能显示
- 仅显示有数据的字段
- 空字段不占用空间
- 枚举值自动转换为中文

### 3. 用户友好
- 点击卡片即可查看详情
- 关闭方式多样（按钮/外部点击/ESC键）
- 联系方式一键获取

### 4. 响应式设计
- 适配桌面端和移动端
- 网格布局自动调整
- 触摸操作优化

### 5. 视觉美观
- 清晰的信息层次
- 统一的颜色方案
- 平滑的动画效果

---

## 🎨 界面示例

### 详情对话框结构
```
┌─────────────────────────────────────────────┐
│  大众 帕萨特                                │
│  车辆详细信息                               │
├─────────────────────────────────────────────┤
│                                             │
│  【车辆照片】                               │
│  [照片1] [照片2] [照片3]                    │
│  [照片4] [照片5] [照片6]                    │
│                                             │
│  【基本信息】                               │
│  品牌型号: 大众 帕萨特                      │
│  车辆类型: 轿车                             │
│  年份: 2020年                               │
│  里程数: 50,000 公里                        │
│  过户次数: 1 次                             │
│  车牌号: 粤B12345                           │
│                                             │
│  【技术参数】                               │
│  排量: 2.0L                                 │
│  变速箱: 双离合                             │
│  驱动方式: 前驱                             │
│  燃料类型: 汽油                             │
│  排放标准: 国六B                            │
│  座位数: 5座                                │
│                                             │
│  【外观信息】                               │
│  车身颜色: 白色                             │
│  内饰颜色: 米色                             │
│                                             │
│  【车辆状态】                               │
│  [车况正常]                                 │
│  车况描述: 车况良好，无重大事故...          │
│                                             │
│  【证件信息】                               │
│  保险到期日: 2025-12-31                     │
│  年检到期日: 2026-06-30                     │
│                                             │
│  【价格信息】                               │
│  新车指导价: ¥200,000                       │
│  售价: ¥150,000                             │
│                                             │
│  【车行信息】                               │
│  车行名称: XX二手车行                       │
│  联系人: 张三                               │
│  联系电话: 138****8888                      │
│  地址: 广东省深圳市...                      │
│                                             │
├─────────────────────────────────────────────┤
│                      [关闭] [📞 联系车行]   │
└─────────────────────────────────────────────┘
```

---

## 🚀 后续优化建议

### 1. 图片预览
- 点击照片可全屏查看
- 支持左右滑动切换
- 支持缩放功能

### 2. 分享功能
- 生成车辆详情分享链接
- 生成车辆详情二维码
- 支持分享到微信、朋友圈

### 3. 收藏功能
- 支持收藏感兴趣的车辆
- 查看收藏列表
- 收藏车辆价格变动提醒

### 4. 对比功能
- 选择多辆车辆进行对比
- 并排展示关键参数
- 高亮差异项

---

**现在客户可以点击车辆卡片查看完整详情了！🎉**
