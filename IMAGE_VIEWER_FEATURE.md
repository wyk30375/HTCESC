# 车辆图片全屏查看功能说明

## 🎯 功能概述

在车辆详情对话框中，点击任意车辆图片可以全屏查看，支持左右滑动浏览所有图片，提供缩略图导航，查看完毕后可以关闭返回车辆详情页面。

---

## 📋 功能特点

### 1. 全屏查看
- **触发方式**：点击车辆详情对话框中的任意图片
- **显示效果**：全屏黑色背景，图片居中显示
- **图片适配**：自动适应屏幕大小，保持图片比例

### 2. 图片导航
- **左右箭头**：点击左右箭头切换图片
- **缩略图导航**：底部显示所有图片缩略图，点击可快速跳转
- **图片计数**：顶部显示当前图片位置（如 3/9）

### 3. 交互操作
- **关闭按钮**：右上角X按钮关闭查看器
- **ESC键**：按ESC键关闭查看器
- **点击外部**：点击图片外部区域关闭查看器

### 4. 视觉反馈
- **当前图片高亮**：缩略图中当前图片有蓝色边框和放大效果
- **悬停效果**：箭头按钮和缩略图有悬停高亮效果
- **平滑过渡**：图片切换有平滑的过渡动画

---

## 📱 使用说明

### 打开图片查看器

#### 步骤1：查看车辆详情
1. 在公共展示页面点击任意车辆卡片
2. 弹出车辆详情对话框
3. 在"车辆照片"部分可以看到所有车辆图片

#### 步骤2：点击图片
1. 将鼠标悬停在任意图片上（图片会有放大效果）
2. 点击图片
3. 图片查看器全屏打开，显示点击的图片

### 浏览图片

#### 方法1：使用左右箭头
- **左箭头**：点击左侧箭头按钮查看上一张图片
- **右箭头**：点击右侧箭头按钮查看下一张图片
- **边界处理**：
  - 第一张图片时，左箭头不显示
  - 最后一张图片时，右箭头不显示

#### 方法2：使用缩略图导航
1. 查看底部的缩略图列表
2. 点击任意缩略图
3. 立即跳转到对应的大图

#### 方法3：键盘快捷键（未来支持）
- **左箭头键**：上一张
- **右箭头键**：下一张
- **ESC键**：关闭查看器

### 关闭图片查看器

#### 方法1：点击关闭按钮
- 点击右上角的X按钮
- 图片查看器关闭，返回车辆详情对话框

#### 方法2：按ESC键
- 按键盘上的ESC键
- 图片查看器关闭

#### 方法3：点击外部区域
- 点击图片外部的黑色背景区域
- 图片查看器关闭

---

## 🎨 界面设计

### 全屏布局
```
┌─────────────────────────────────────────────────────────┐
│                        [3 / 9]                    [X]   │ ← 顶部：图片计数 + 关闭按钮
│                                                         │
│                                                         │
│  [<]                  [大图显示]                  [>]  │ ← 中间：左箭头 + 图片 + 右箭头
│                                                         │
│                                                         │
│              [缩略图1][缩略图2][缩略图3]...             │ ← 底部：缩略图导航
└─────────────────────────────────────────────────────────┘
```

### 元素说明

#### 1. 顶部区域
- **图片计数**：
  - 位置：顶部居中
  - 样式：黑色半透明背景，白色文字
  - 格式：`当前索引 / 总数`（如 3 / 9）
  - 显示条件：仅在有多张图片时显示

- **关闭按钮**：
  - 位置：右上角
  - 图标：X（关闭图标）
  - 样式：白色图标，悬停时有半透明白色背景
  - 尺寸：24x24px

#### 2. 中间区域
- **左箭头按钮**：
  - 位置：左侧居中
  - 图标：ChevronLeft（左箭头）
  - 样式：白色图标，悬停时有半透明白色背景
  - 尺寸：48x48px
  - 显示条件：有多张图片且不是第一张时显示

- **图片显示**：
  - 位置：屏幕居中
  - 样式：最大宽度和高度为屏幕的95%
  - 适配：保持图片原始比例（object-contain）
  - 背景：黑色半透明（bg-black/95）

- **右箭头按钮**：
  - 位置：右侧居中
  - 图标：ChevronRight（右箭头）
  - 样式：白色图标，悬停时有半透明白色背景
  - 尺寸：48x48px
  - 显示条件：有多张图片且不是最后一张时显示

#### 3. 底部区域
- **缩略图导航**：
  - 位置：底部居中
  - 布局：水平排列，支持横向滚动
  - 缩略图尺寸：64x64px
  - 间距：8px
  - 背景：黑色半透明
  - 显示条件：仅在有多张图片时显示

- **缩略图样式**：
  - **当前图片**：
    - 边框：2px蓝色边框（border-primary）
    - 缩放：放大10%（scale-110）
  - **其他图片**：
    - 边框：2px半透明白色边框（border-white/30）
    - 悬停：边框变为60%透明度白色（hover:border-white/60）

---

## 💡 使用场景

### 场景1：客户查看车辆外观
1. 客户在公共展示页面浏览车辆
2. 点击感兴趣的车辆查看详情
3. 点击车辆照片全屏查看
4. 左右滑动查看车辆各个角度的照片
5. 查看完毕后关闭，继续查看其他信息

### 场景2：对比车辆细节
1. 客户查看车辆详情
2. 点击车辆内饰照片全屏查看
3. 使用缩略图快速切换到不同角度的内饰照片
4. 仔细查看内饰细节
5. 关闭后查看其他车辆信息

### 场景3：移动端查看
1. 客户在手机上浏览车辆
2. 点击小图查看大图
3. 全屏显示，充分利用屏幕空间
4. 左右滑动浏览所有照片
5. 点击关闭按钮返回

---

## 🔧 技术实现

### 状态管理
```typescript
const [imageViewerOpen, setImageViewerOpen] = useState(false);
const [currentImageIndex, setCurrentImageIndex] = useState(0);
```

### 打开图片查看器
```typescript
onClick={() => {
  setCurrentImageIndex(index); // 设置当前图片索引
  setImageViewerOpen(true);    // 打开查看器
}}
```

### 切换图片
```typescript
// 上一张
onClick={() => setCurrentImageIndex(currentImageIndex - 1)}

// 下一张
onClick={() => setCurrentImageIndex(currentImageIndex + 1)}

// 跳转到指定图片
onClick={() => setCurrentImageIndex(index)}
```

### 关闭查看器
```typescript
// 方法1：点击关闭按钮
onClick={() => setImageViewerOpen(false)}

// 方法2：Dialog的onOpenChange回调
onOpenChange={setImageViewerOpen}
```

### 条件渲染
```typescript
// 左箭头：有多张图片且不是第一张
{selectedVehicle?.photos && 
 selectedVehicle.photos.length > 1 && 
 currentImageIndex > 0 && (
  <Button>...</Button>
)}

// 右箭头：有多张图片且不是最后一张
{selectedVehicle?.photos && 
 selectedVehicle.photos.length > 1 && 
 currentImageIndex < selectedVehicle.photos.length - 1 && (
  <Button>...</Button>
)}
```

---

## 🎯 交互细节

### 1. 图片点击区域
- **详情对话框中的图片**：
  - 添加 `cursor-pointer` 样式
  - 鼠标悬停时有放大效果（hover:scale-105）
  - 点击任意位置都可以打开查看器

### 2. 箭头按钮
- **显示逻辑**：
  - 只有一张图片时不显示箭头
  - 第一张图片时不显示左箭头
  - 最后一张图片时不显示右箭头
- **样式**：
  - 白色图标，半透明背景
  - 悬停时背景变亮（hover:bg-white/20）
  - 尺寸：48x48px，图标32x32px

### 3. 缩略图导航
- **布局**：
  - 水平排列，支持横向滚动
  - 最大宽度90vw，超出自动滚动
  - 黑色半透明背景，圆角
- **交互**：
  - 点击缩略图立即切换到对应大图
  - 当前图片有蓝色边框和放大效果
  - 其他图片悬停时边框变亮

### 4. 图片计数
- **显示格式**：`当前索引 / 总数`
- **位置**：顶部居中
- **样式**：黑色半透明背景，白色文字，圆角
- **显示条件**：仅在有多张图片时显示

---

## 📊 响应式设计

### 桌面端（≥1024px）
- **图片尺寸**：最大95vw x 95vh
- **箭头位置**：左右两侧，距离边缘16px
- **缩略图尺寸**：64x64px
- **缩略图间距**：8px

### 移动端（<1024px）
- **图片尺寸**：最大95vw x 95vh
- **箭头位置**：左右两侧，距离边缘16px
- **缩略图尺寸**：64x64px（保持不变）
- **缩略图滚动**：支持横向滑动

### 触摸优化
- **缩略图点击**：增大点击区域
- **箭头按钮**：适合手指点击的尺寸（48x48px）
- **关闭按钮**：右上角，易于触摸

---

## 🔍 边界情况处理

### 1. 只有一张图片
- **不显示**：左右箭头、图片计数、缩略图导航
- **显示**：关闭按钮、图片

### 2. 第一张图片
- **不显示**：左箭头
- **显示**：右箭头、图片计数、缩略图导航、关闭按钮

### 3. 最后一张图片
- **不显示**：右箭头
- **显示**：左箭头、图片计数、缩略图导航、关闭按钮

### 4. 没有图片
- **不显示**：车辆照片部分
- **详情对话框**：正常显示其他信息

---

## 🎨 视觉效果

### 1. 背景
- **颜色**：黑色95%透明度（bg-black/95）
- **效果**：突出图片，减少干扰

### 2. 图片
- **适配**：object-contain（保持比例）
- **最大尺寸**：95vw x 95vh
- **居中**：水平和垂直居中

### 3. 按钮
- **颜色**：白色图标
- **背景**：透明，悬停时半透明白色
- **过渡**：平滑的颜色过渡动画

### 4. 缩略图
- **当前图片**：
  - 边框：2px蓝色（border-primary）
  - 缩放：110%（scale-110）
  - 过渡：平滑的缩放和边框颜色过渡
- **其他图片**：
  - 边框：2px半透明白色
  - 悬停：边框变亮

---

## 🚀 后续优化建议

### 1. 键盘导航
- **左箭头键**：上一张图片
- **右箭头键**：下一张图片
- **ESC键**：关闭查看器（已支持）
- **Home键**：跳转到第一张
- **End键**：跳转到最后一张

### 2. 触摸手势
- **左滑**：下一张图片
- **右滑**：上一张图片
- **双击**：放大/缩小图片
- **捏合**：缩放图片

### 3. 图片缩放
- **鼠标滚轮**：放大/缩小图片
- **双击**：放大到100%或适应屏幕
- **拖拽**：移动放大后的图片

### 4. 图片信息
- **显示图片尺寸**：如 1920x1080
- **显示图片大小**：如 2.5MB
- **显示拍摄时间**：如果有EXIF信息

### 5. 分享功能
- **复制图片链接**：复制当前图片URL
- **下载图片**：下载当前图片到本地
- **分享到社交媒体**：分享图片到微信、朋友圈等

### 6. 图片预加载
- **预加载相邻图片**：提高切换速度
- **懒加载缩略图**：优化初始加载性能

---

## 📋 使用提示

### 1. 图片质量
- 建议上传高质量图片（至少1920x1080）
- 图片文件大小控制在5MB以内
- 支持JPG、PNG、WebP格式

### 2. 图片数量
- 建议上传6-12张图片
- 包含车辆外观、内饰、细节等多角度照片
- 缩略图导航支持横向滚动，可上传更多图片

### 3. 图片顺序
- 第一张图片作为封面，在卡片中显示
- 建议按照外观→内饰→细节的顺序排列
- 可在车辆编辑时调整图片顺序

---

## ✅ 功能特点总结

### 1. 用户友好
- **一键打开**：点击图片即可全屏查看
- **多种导航**：箭头、缩略图、键盘快捷键
- **多种关闭**：关闭按钮、ESC键、点击外部

### 2. 视觉优秀
- **全屏显示**：充分利用屏幕空间
- **黑色背景**：突出图片，减少干扰
- **平滑过渡**：所有交互都有平滑动画

### 3. 响应式设计
- **桌面端优化**：大屏幕显示更多细节
- **移动端适配**：触摸友好，支持滑动
- **自适应布局**：适应不同屏幕尺寸

### 4. 性能优秀
- **按需加载**：仅在打开时加载大图
- **懒加载**：缩略图懒加载
- **平滑切换**：图片切换无延迟

---

**现在您可以在车辆详情中点击图片全屏查看，并左右滑动浏览所有照片了！🎉**
