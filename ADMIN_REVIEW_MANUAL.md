# 平台超级管理员操作手册

## 🎯 目标
审核新车行的注册申请，确保平台上的车行都是合法、真实的商户。

## 👤 角色要求
- **必须是超级管理员**（role = super_admin）
- 只有超级管理员可以看到"车行管理"菜单

## 📍 访问路径

```
登录系统 → 左侧导航栏 → 车行管理
```

或直接访问：`http://localhost:5173/dealerships`

## 🔍 审核流程详解

### 1️⃣ 查看待审核列表

进入车行管理页面后，默认显示 **"待审核"** 标签页。

**页面显示内容：**
- 车行名称
- 车行代码（唯一标识）
- 联系人
- 联系电话
- 申请时间
- 操作按钮（查看、通过、拒绝）

**红色徽章提示：**
如果有待审核车行，"待审核"标签会显示红色数字徽章，例如：`待审核 🔴 3`

### 2️⃣ 查看车行详细资质

点击 **"查看"** 按钮（眼睛图标），弹出详情对话框。

**核验要点：**

✅ **基本信息**
- 车行名称是否规范
- 车行代码是否合理（只能包含字母、数字、下划线）
- 联系人姓名
- 联系电话（建议拨打确认）

✅ **地理位置**
- 省份、城市、区县
- 详细地址

✅ **营业执照（重点）**
- 图片是否清晰
- 营业执照信息是否完整
- 经营范围是否包含二手车销售
- 营业执照是否在有效期内
- 企业名称是否与申请的车行名称一致

### 3️⃣ 做出审核决定

#### ✅ 审核通过

**操作步骤：**
1. 确认所有信息无误
2. 点击 **"通过"** 按钮（绿色，带 ✓ 图标）
3. 系统自动执行：
   - 将车行状态改为 `active`（正常运营）
   - 记录审核时间
   - 记录审核人（您的用户ID）
4. 显示成功提示："车行审核通过"
5. 车行自动移至"正常运营"标签页

**审核通过后：**
- 车行管理员可以立即登录系统
- 车行可以开始使用所有功能
- 车行的在售车辆会显示在公共主页

#### ❌ 审核拒绝

**操作步骤：**
1. 点击 **"拒绝"** 按钮（红色，带 ✗ 图标）
2. 在弹出的对话框中填写 **拒绝原因**（必填）
3. 点击 **"确认拒绝"**
4. 系统自动执行：
   - 将车行状态改为 `rejected`（审核拒绝）
   - 保存拒绝原因
   - 记录审核时间和审核人
5. 显示成功提示："已拒绝车行注册申请"
6. 车行移至"已拒绝"标签页

**拒绝原因示例：**
- "营业执照图片不清晰，请重新上传高清图片"
- "联系电话无法接通，请提供有效联系方式"
- "营业执照已过期，请更新有效证件"
- "经营范围不包含二手车销售业务"
- "企业名称与申请的车行名称不一致"

### 4️⃣ 管理已审核车行

#### 正常运营车行

在 **"正常运营"** 标签页，您可以：

- **查看详情**：查看车行完整信息
- **编辑信息**：修改车行资料（车行代码不可修改）
- **停用车行**：临时禁用车行（点击红色电源图标）

#### 已停用车行

在 **"已停用"** 标签页，您可以：

- **查看详情**：查看车行信息
- **编辑信息**：修改车行资料
- **启用车行**：重新启用车行（点击绿色电源图标）

#### 已拒绝车行

在 **"已拒绝"** 标签页，您可以：

- **查看详情**：查看车行信息和拒绝原因
- 车行可以使用不同的车行代码重新申请

## 📊 审核统计

页面顶部的标签页会显示各状态车行的数量：

```
待审核 🔴 3  |  正常运营 (15)  |  已停用 (2)  |  已拒绝 (5)
```

## ⚠️ 注意事项

### 审核时必须注意：

1. **营业执照真实性**
   - 仔细核对营业执照信息
   - 必要时可以通过国家企业信用信息公示系统查询

2. **联系方式有效性**
   - 建议电话确认联系人身份
   - 确保联系电话可以接通

3. **车行代码唯一性**
   - 车行代码一旦创建不可修改
   - 确保代码简洁、易记、有意义

4. **及时处理申请**
   - 建议在24小时内处理待审核申请
   - 避免用户等待过久影响体验

5. **拒绝原因明确**
   - 拒绝时必须填写清晰的原因
   - 帮助申请人了解问题并改进

## 🔐 权限说明

### 谁可以审核车行？

- ✅ **超级管理员**（super_admin）：可以审核所有车行
- ❌ **车行管理员**（admin）：只能管理自己的车行
- ❌ **普通员工**（user）：无权访问车行管理

### 如何成为超级管理员？

系统中第一个注册的用户自动成为超级管理员。后续的超级管理员需要通过数据库手动设置：

```sql
UPDATE profiles 
SET role = 'super_admin' 
WHERE username = '用户名';
```

## 📝 审核记录

系统会自动记录以下审核信息：

- **reviewed_at**：审核时间（精确到秒）
- **reviewed_by**：审核人ID（您的用户ID）
- **rejected_reason**：拒绝原因（仅拒绝时记录）

这些信息可以在车行详情中查看，便于追溯审核历史。

## 🆘 常见问题

### Q1: 找不到"车行管理"菜单？
**A:** 请确认您的账号角色是 `super_admin`。只有超级管理员可以看到此菜单。

### Q2: 审核通过后可以撤销吗？
**A:** 可以。您可以在"正常运营"标签页找到该车行，点击"停用"按钮临时禁用，或通过"编辑"修改状态。

### Q3: 如何批量审核车行？
**A:** 目前需要逐个审核，确保每个车行都经过仔细核验。这是为了保证平台质量。

### Q4: 被拒绝的车行可以重新申请吗？
**A:** 可以。用户可以使用不同的车行代码重新提交申请。建议在拒绝原因中说明需要改进的地方。

### Q5: 如何联系申请人？
**A:** 在车行详情中可以看到联系人和联系电话，建议在审核前电话确认。

## 📞 技术支持

如果在审核过程中遇到技术问题，请联系系统管理员。

---

**最后更新时间：** 2026-01-14
**文档版本：** v1.0
