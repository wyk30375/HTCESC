# 测试车行登录指南

## 🔐 登录方式

由于测试车行的管理员账号需要通过Supabase Auth创建，目前有以下几种方式访问测试车行数据：

---

## 方式一：使用平台管理员账号（推荐）

### 登录信息
- **邮箱**：`wh@yichi.internal`
- **密码**：`123456`
- **角色**：超级管理员

### 操作步骤

#### 1. 登录系统
1. 打开登录页面
2. 输入邮箱：`wh@yichi.internal`
3. 输入密码：`123456`
4. 点击"登录"

#### 2. 进入平台管理后台
1. 登录成功后，系统会自动识别超级管理员身份
2. 左侧菜单显示"平台管理"相关菜单

#### 3. 查看测试车行
1. 点击左侧菜单"车行管理"
2. 在车行列表中可以看到三个测试车行：
   - 鸿运二手车（深圳市）
   - 顺达汽车（杭州市）
   - 盛世车行（南京市）

#### 4. 查看会员状态
1. 点击左侧菜单"会员管理"
2. 查看三个测试车行的会员状态：
   - 鸿运二手车：已续费会员，剩余300天
   - 顺达汽车：免费期会员，剩余150天
   - 盛世车行：免费期即将到期，剩余5天

#### 5. 测试续费功能
1. 在会员管理页面选择"盛世车行"
2. 点击"续费"按钮
3. 填写续费信息并确认
4. 验证续费成功

---

## 方式二：创建测试车行管理员账号

如果需要为测试车行创建独立的管理员账号，可以通过以下步骤：

### 步骤1：使用平台管理员登录

使用上述平台管理员账号登录系统。

### 步骤2：进入员工管理

1. 点击左侧菜单"平台管理" → "员工管理"
2. 或者直接访问：`/platform/employees`

### 步骤3：为测试车行添加管理员

#### 为鸿运二手车添加管理员
1. 点击"添加员工"按钮
2. 填写信息：
   - 用户名：张经理
   - 邮箱：zhangsan@hongyun.internal
   - 密码：123456
   - 角色：管理员
   - 车行：鸿运二手车
3. 点击"确认"

#### 为顺达汽车添加管理员
1. 点击"添加员工"按钮
2. 填写信息：
   - 用户名：李经理
   - 邮箱：lisi@shunda.internal
   - 密码：123456
   - 角色：管理员
   - 车行：顺达汽车
3. 点击"确认"

#### 为盛世车行添加管理员
1. 点击"添加员工"按钮
2. 填写信息：
   - 用户名：王经理
   - 邮箱：wangwu@shengshi.internal
   - 密码：123456
   - 角色：管理员
   - 车行：盛世车行
3. 点击"确认"

### 步骤4：使用新账号登录

创建成功后，可以使用新账号登录：

**鸿运二手车管理员**
- 邮箱：`zhangsan@hongyun.internal`
- 密码：`123456`

**顺达汽车管理员**
- 邮箱：`lisi@shunda.internal`
- 密码：`123456`

**盛世车行管理员**
- 邮箱：`wangwu@shengshi.internal`
- 密码：`123456`

---

## 方式三：使用SQL直接创建Auth用户（开发环境）

如果您有数据库直接访问权限，可以使用以下SQL创建认证用户：

### 注意事项
⚠️ 此方法仅适用于开发环境
⚠️ 生产环境请使用Supabase Dashboard或API创建用户

### SQL脚本

```sql
-- 为鸿运二手车创建管理员账号
-- 注意：此SQL需要在Supabase Dashboard的SQL Editor中执行
-- 或者使用Supabase CLI

-- 1. 创建auth用户（需要在Supabase Dashboard执行）
-- 邮箱：zhangsan@hongyun.internal
-- 密码：123456

-- 2. 创建profile记录
INSERT INTO profiles (
  id,
  username,
  email,
  phone,
  role,
  dealership_id,
  status,
  default_password
) VALUES (
  '创建的auth用户ID',
  '张经理',
  'zhangsan@hongyun.internal',
  '13900000001',
  'admin',
  '11111111-1111-1111-1111-111111111111',
  'active',
  '123456'
);
```

---

## 📊 测试车行数据概览

### 鸿运二手车
- **车行ID**：`11111111-1111-1111-1111-111111111111`
- **车行名称**：鸿运二手车
- **所在地**：广东省 深圳市 南山区
- **车辆数量**：15台
- **会员等级**：三级会员
- **会员状态**：已续费会员（剩余300天）
- **管理员邮箱**：`zhangsan@hongyun.internal`（需创建）
- **管理员密码**：`123456`

### 顺达汽车
- **车行ID**：`22222222-2222-2222-2222-222222222222`
- **车行名称**：顺达汽车
- **所在地**：浙江省 杭州市 西湖区
- **车辆数量**：30台
- **会员等级**：二级会员
- **会员状态**：免费期会员（剩余150天）
- **管理员邮箱**：`lisi@shunda.internal`（需创建）
- **管理员密码**：`123456`

### 盛世车行
- **车行ID**：`33333333-3333-3333-3333-333333333333`
- **车行名称**：盛世车行
- **所在地**：江苏省 南京市 鼓楼区
- **车辆数量**：8台
- **会员等级**：三级会员
- **会员状态**：免费期即将到期（剩余5天）
- **管理员邮箱**：`wangwu@shengshi.internal`（需创建）
- **管理员密码**：`123456`

---

## 🧪 测试场景

### 场景1：查看已续费会员状态
1. 使用平台管理员登录
2. 进入"会员管理"
3. 查看"鸿运二手车"的会员状态
4. 验证显示：
   - ✅ 会员等级：三级会员
   - ✅ 剩余天数：300天
   - ✅ 状态：正常会员（非试用期）
   - ✅ 有支付记录

### 场景2：查看免费期会员状态
1. 使用平台管理员登录
2. 进入"会员管理"
3. 查看"顺达汽车"的会员状态
4. 验证显示：
   - ✅ 会员等级：二级会员
   - ✅ 剩余天数：150天
   - ✅ 状态：免费期
   - ✅ 无支付记录

### 场景3：查看即将到期会员状态
1. 使用平台管理员登录
2. 进入"会员管理"
3. 查看"盛世车行"的会员状态
4. 验证显示：
   - ✅ 会员等级：三级会员
   - ✅ 剩余天数：5天
   - ✅ 状态：免费期
   - ⚠️ 显示到期提醒
   - ✅ 无支付记录

### 场景4：测试续费功能
1. 使用平台管理员登录
2. 进入"会员管理"
3. 选择"盛世车行"
4. 点击"续费"按钮
5. 填写续费信息：
   - 会员等级：三级会员
   - 支付方式：线下支付
   - 交易流水号：TEST20260119001
   - 备注：测试续费
6. 确认续费
7. 验证续费成功：
   - ✅ 剩余天数更新为365天
   - ✅ 状态更新为正常会员
   - ✅ 创建支付记录

---

## ❓ 常见问题

### Q1: 为什么测试车行没有管理员账号？

**A:** 测试车行的数据是通过SQL直接创建的，没有通过Supabase Auth创建认证用户。需要通过以下方式之一创建：
1. 使用平台管理员在员工管理中添加
2. 使用Supabase Dashboard创建用户
3. 使用Supabase API创建用户

### Q2: 如何使用平台管理员查看测试车行数据？

**A:** 
1. 使用邮箱 `wh@yichi.internal` 和密码 `123456` 登录
2. 进入"平台管理"模式
3. 在"车行管理"或"会员管理"中查看测试车行数据

### Q3: 创建管理员账号后无法登录？

**A:** 
1. 确认邮箱和密码输入正确
2. 检查账号是否已激活（status = 'active'）
3. 检查是否有对应的auth.users记录
4. 尝试重置密码

### Q4: 如何切换不同车行的管理员账号？

**A:** 
1. 退出当前账号
2. 使用其他车行管理员的邮箱和密码登录
3. 系统会自动识别车行身份并加载对应数据

### Q5: 测试完成后如何清理数据？

**A:** 参考 [MEMBERSHIP_TEST_DATA.md](./MEMBERSHIP_TEST_DATA.md) 文档中的"数据清理"章节，执行提供的SQL脚本。

---

## 📚 相关文档

- [会员状态测试数据说明](./MEMBERSHIP_TEST_DATA.md)
- [会员制系统功能说明](./MEMBERSHIP_SYSTEM_GUIDE.md)
- [在线支付功能说明](./ONLINE_PAYMENT_GUIDE.md)
- [会员中心加载失败修复说明](./MEMBERSHIP_ERROR_FIX.md)

---

## 🎯 快速开始

### 最简单的测试方式

1. **登录平台管理员**
   ```
   邮箱：wh@yichi.internal
   密码：123456
   ```

2. **查看测试车行**
   - 点击"车行管理"
   - 找到三个测试车行

3. **查看会员状态**
   - 点击"会员管理"
   - 查看三种不同的会员状态

4. **测试续费功能**
   - 选择"盛世车行"（即将到期）
   - 点击"续费"
   - 完成续费流程

---

**文档版本**：v1.0  
**最后更新**：2026-01-19  
**适用系统**：二手车销售管理系统 v2.0+
