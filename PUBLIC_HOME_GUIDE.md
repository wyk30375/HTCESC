# 公共主页面使用指南

## 页面概述

**页面地址**: http://localhost:5173/register

公共主页面是易驰汽车平台的门户页面，展示所有车行的在售车辆，并提供车行注册功能。

## 页面功能

### 1. 顶部导航栏

**未登录用户**：
- Logo 和平台名称
- "登录"按钮 - 跳转到登录页面
- "注册车行"按钮 - 打开注册对话框

**已登录用户**：
- Logo 和平台名称
- 当前车行标识（Badge）
- "进入系统"按钮 - 跳转到仪表盘

### 2. Hero 区域

- 欢迎标语和平台介绍
- 搜索框 - 支持搜索品牌、型号、车牌号
- 车行筛选器 - 按车行筛选车辆

### 3. 车辆展示区

**按车行分组展示**：
- 每个车行独立展示区域
- 显示车行名称和在售车辆数量
- 车辆卡片展示：
  - 车辆照片
  - 品牌型号
  - 年份和里程数
  - 售价
  - 车况描述
  - 所属车行

**空状态**：
- 无车辆时显示友好提示
- 搜索无结果时显示提示

### 4. 车行注册对话框

**创建新车行**：
- 车行信息：名称、代码、联系人、电话、地址
- 管理员账号：用户名、密码、手机号
- 自动登录并跳转到系统

**加入现有车行**：
- 输入车行代码
- 员工账号：用户名、密码、手机号
- 自动登录并跳转到系统

### 5. 底部 CTA（未登录用户）

- 邀请注册车行
- "立即注册车行"按钮

### 6. 页脚

- 版权信息
- 平台标语

## 功能特点

### 搜索功能
- 实时搜索，无需点击按钮
- 支持搜索：品牌、型号、车牌号
- 搜索结果即时更新

### 筛选功能
- 按车行筛选车辆
- "全部车行"选项查看所有车辆
- 筛选结果即时更新

### 响应式设计
- 桌面端：3列网格布局
- 平板端：2列网格布局
- 移动端：单列布局
- 导航栏自适应

### 数据加载
- 骨架屏加载状态
- 优雅的空状态提示
- 图片懒加载优化性能

## 使用场景

### 场景1：访客浏览车辆
1. 访问 http://localhost:5173/register
2. 浏览各车行的在售车辆
3. 使用搜索和筛选功能
4. 点击"注册车行"开始注册

### 场景2：车行注册
1. 点击"注册车行"按钮
2. 选择"创建新车行"或"加入车行"
3. 填写表单信息
4. 提交后自动登录

### 场景3：已登录用户访问
1. 访问页面看到"进入系统"按钮
2. 可以浏览车辆
3. 点击"进入系统"返回仪表盘

## 技术实现

### 数据获取
- 查询所有状态为 active 的车行
- 查询所有状态为 in_stock 的车辆
- 关联查询车行信息

### 数据展示
- 按车行分组展示车辆
- 支持搜索和筛选
- 响应式网格布局

### 用户体验
- 骨架屏加载状态
- 空状态友好提示
- 表单验证和错误提示
- 自动登录功能

## 与其他页面的关系

- **登录页面** (`/login`) - 提供"浏览在售车辆"按钮跳转到此页面
- **仪表盘** (`/`) - 已登录用户点击"进入系统"跳转
- **客户展示** (`/customer-view`) - 专门的客户展示页面，功能类似但设计不同

## 开发说明

### 组件位置
- 文件：`src/pages/PublicHome.tsx`
- 路由：`/register`

### 依赖组件
- Card, Button, Input, Label, Textarea
- Dialog, Tabs, Badge, Select
- Skeleton（加载状态）

### API 调用
- `supabase.from('dealerships').select()` - 获取车行
- `supabase.from('vehicles').select()` - 获取车辆
- `dealershipsApi.create()` - 创建车行
- `supabase.auth.signUp()` - 用户注册
- `supabase.auth.signInWithPassword()` - 用户登录

## 未来优化方向

1. **车辆详情页**：点击车辆卡片查看详情
2. **分页加载**：车辆数量多时分页展示
3. **高级筛选**：按价格、年份、里程数筛选
4. **排序功能**：按价格、时间排序
5. **收藏功能**：收藏感兴趣的车辆
6. **联系车行**：直接联系车行咨询
7. **地图展示**：显示车行位置

## 常见问题

**Q: 为什么页面路径是 /register？**
A: 保持向后兼容，原注册页面改造为公共主页面。

**Q: 已登录用户能看到其他车行的车辆吗？**
A: 可以，公共主页面展示所有车行的车辆。

**Q: 如何只展示某个车行的车辆？**
A: 使用顶部的车行筛选器选择特定车行。

**Q: 搜索支持哪些字段？**
A: 支持品牌、型号、车牌号的模糊搜索。

**Q: 车辆照片加载慢怎么办？**
A: 使用了图片懒加载，滚动到可见区域才加载。

## 总结

公共主页面是平台的门户，集成了车辆展示和车行注册功能，为访客和新用户提供了良好的第一印象和便捷的注册流程。
