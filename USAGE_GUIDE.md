# 二手车销售管理系统 - 使用指南

## 🚀 立即开始使用

### 第一步：启动系统

在终端中执行以下命令：

```bash
cd /workspace/app-8u0242wc45c1
pnpm run dev
```

系统将在几秒钟内启动，您会看到类似以下的输出：

```
VITE v5.x.x  ready in xxx ms

➜  Local:   http://localhost:5173/
➜  Network: use --host to expose
```

### 第二步：访问系统

打开浏览器，访问：**http://localhost:5173**

您将看到登录页面。

---

## 📝 首次使用流程

### 1. 注册管理员账号（必须）

1. 点击登录页面的"注册"按钮
2. 输入用户名（例如：admin）
3. 输入密码（建议使用强密码）
4. 点击"注册"按钮
5. **重要**：第一个注册的用户会自动成为管理员！

### 2. 登录系统

使用刚才注册的用户名和密码登录系统。

### 3. 添加员工信息

登录后，您会看到左侧导航菜单：

1. 点击"员工管理"
2. 点击右上角"添加员工"按钮
3. 填写员工信息：
   - **关联用户**：如果有其他注册用户可以选择，否则留空
   - **姓名**：员工真实姓名
   - **职位**：例如"销售经理"、"销售顾问"
   - **联系方式**：手机号码
   - **入职日期**：选择日期
4. 点击"保存"

### 4. 为员工分配角色

员工添加后，需要分配利润分配角色：

1. 在员工列表中找到刚添加的员工
2. 点击"角色"按钮
3. 勾选要分配的角色：
   - **地租**（18%）- 负责场地租金的角色
   - **月奖金池**（10%）- 参与月度奖金分配
   - **销售提成**（36%）- 销售人员提成
   - **押车出资人**（36%）- 车辆押金出资人
4. 如果多人共同分配一个角色，可以调整分配比例
5. 点击"保存"

---

## 🚗 车辆管理

### 录入新车辆

1. 点击左侧菜单"车辆管理"
2. 点击右上角"车辆入库"按钮
3. 填写车辆信息：
   - **车架号后六位**：车辆唯一标识（必填，6位数字或字母）
   - **车牌号**：例如"京A12345"
   - **品牌**：例如"宝马"
   - **型号**：例如"5系 2020款"
   - **年份**：车辆出厂年份
   - **里程数**：当前行驶公里数
   - **购车款**：采购价格（元）
   - **车况描述**：详细描述车辆状况
4. 上传车辆照片：
   - 点击上传区域选择图片
   - 支持多张照片（最多10张）
   - 图片会自动压缩至1MB以下
5. 点击"保存"

### 查看车辆

- **在售车辆**：点击"在售车辆"标签查看所有待售车辆
- **已售车辆**：点击"已售车辆"标签查看销售历史

### 编辑车辆（仅管理员）

- 管理员可以点击车辆列表中的"编辑"按钮修改车辆信息
- 员工只能查看，不能修改

---

## 💰 销售管理

### 记录销售

1. 点击左侧菜单"销售管理"
2. 点击右上角"记录销售"按钮
3. 填写销售信息：

   **基本信息**
   - **选择车辆**：从在售车辆中选择
   - **销售日期**：成交日期
   - **成交价格**：实际售价（元）

   **客户信息**
   - **客户姓名**：购车人姓名
   - **客户联系方式**：手机号码
   - **客户身份证号**：选填

   **销售人员**
   - **销售员**：选择负责销售的员工

   **销售成本**
   - **销售整备费**：销售前的整备费用
   - **销售过户费**：过户产生的费用
   - **销售杂费**：其他杂项费用

   **贷款信息**
   - 如果客户办理贷款，勾选"有贷款返利"
   - 填写贷款返利金额

4. 点击"保存"

系统会自动：
- 计算总成本 = 购车款 + 所有整备费 + 销售成本
- 计算总利润 = 成交价 - 总成本 + 贷款返利
- 更新车辆状态为"已售"

### 查看销售详情

点击销售记录列表中的"眼睛"图标，可以查看完整的销售详情。

---

## 📊 费用管理

### 添加费用记录

1. 点击左侧菜单"费用管理"
2. 点击右上角"添加费用"按钮
3. 填写费用信息：
   - **费用类型**：选择类型（租金、水电费、工资、营销费用等）
   - **金额**：费用金额（元）
   - **费用日期**：发生日期
   - **费用说明**：简要说明
   - **备注**：详细备注（选填）
4. 点击"保存"

### 按月查看费用

- 使用页面上的月份选择器切换不同月份
- 系统会自动统计本月总费用
- 显示费用明细列表

---

## 📈 统计分析

点击左侧菜单"统计分析"，可以查看：

- **月度销售趋势图**：最近几个月的销售情况
- **员工销售排行**：按销售额排序
- **利润分析**：利润构成和分配
- **费用统计**：各类费用占比

---

## 👥 用户管理（仅管理员）

### 查看所有用户

1. 点击左侧菜单"用户管理"
2. 查看所有注册用户列表

### 修改用户角色

1. 找到要修改的用户
2. 点击"编辑"按钮
3. 选择新的角色（管理员/员工）
4. 点击"保存"

**注意**：
- 修改角色后，用户需要重新登录才能生效
- 至少保留一个管理员账号

---

## 📱 客户展示页面

### 访问方式

无需登录，直接访问：**http://localhost:5173/customer-view**

### 功能

- 展示所有在售车辆
- 显示车辆照片、品牌型号、年份、里程数
- 客户可以浏览车辆信息

---

## 🔐 权限说明

### 员工权限

✅ **可以做的事情**：
- 录入新车辆
- 创建销售记录
- 添加费用记录
- 查看所有数据

❌ **不能做的事情**：
- 修改已有车辆信息
- 修改已有销售记录
- 修改已有费用记录
- 删除任何数据
- 管理员工信息
- 修改用户角色

### 管理员权限

✅ **拥有所有权限**：
- 所有员工权限
- 修改所有数据
- 删除数据
- 管理员工
- 分配角色
- 管理用户

---

## 💡 使用技巧

### 1. 快速查找

- 使用浏览器的搜索功能（Ctrl+F 或 Cmd+F）在列表中快速查找

### 2. 数据导出

- 目前系统不支持直接导出
- 可以通过 Supabase Dashboard 导出数据

### 3. 批量操作

- 目前不支持批量操作
- 需要逐个处理

### 4. 数据备份

- Supabase 自动每日备份
- 建议定期导出重要数据

---

## ❓ 常见问题

### Q1: 忘记密码怎么办？

**A**: 目前系统不支持自助重置密码，需要通过以下方式：
1. 联系管理员通过 Supabase Dashboard 重置
2. 或者注册新账号（但不会是管理员）

### Q2: 如何添加更多管理员？

**A**: 
1. 让新用户先注册账号
2. 使用现有管理员账号登录
3. 进入"用户管理"页面
4. 将新用户的角色改为"管理员"

### Q3: 图片上传失败？

**A**: 检查以下几点：
- 图片格式是否支持（JPEG、PNG、WEBP、GIF、AVIF）
- 文件名是否只包含英文字母和数字
- 图片大小是否过大（系统会自动压缩，但原图不要超过10MB）

### Q4: 车辆录入后找不到？

**A**: 
- 检查是否在"在售车辆"标签下
- 如果车辆已被销售，会在"已售车辆"标签下
- 刷新页面重试

### Q5: 员工看不到某些功能？

**A**: 
- 这是正常的，员工权限受限
- 某些功能（如编辑、删除）只有管理员可见
- 如需修改数据，请联系管理员

### Q6: 如何停止系统？

**A**: 
- 在运行 `pnpm run dev` 的终端中按 `Ctrl+C`
- 系统会自动停止

### Q7: 如何重新启动？

**A**: 
```bash
cd /workspace/app-8u0242wc45c1
pnpm run dev
```

---

## 🎯 最佳实践

### 1. 数据录入

- **车辆入库**：尽量填写完整信息，包括详细的车况描述
- **销售记录**：及时记录，避免遗漏
- **费用管理**：按实际发生日期记录，便于月度统计

### 2. 角色分配

- 根据实际业务情况分配角色
- 一个员工可以担任多个角色
- 多个员工可以共同分配一个角色的比例

### 3. 权限管理

- 定期审查用户权限
- 离职员工及时停用账号
- 保持至少一个管理员账号

### 4. 数据安全

- 定期备份重要数据
- 使用强密码
- 不要共享管理员账号

---

## 📞 获取帮助

### 查看文档

- **README.md** - 项目概述
- **QUICK_START.md** - 快速开始
- **SYSTEM_GUIDE.md** - 系统指南
- **DEPLOYMENT_GUIDE.md** - 部署指南
- **PERMISSION_TEST_GUIDE.md** - 权限测试

### 技术支持

如遇到技术问题，请：
1. 查看浏览器控制台（F12）的错误信息
2. 检查 Supabase Dashboard 的日志
3. 参考相关文档
4. 联系系统管理员

---

**祝您使用愉快！** 🚗✨

如有任何问题或建议，欢迎反馈。
